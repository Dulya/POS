(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){},41:function(e,t,a){e.exports=a(91)},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(21),s=a.n(l),c=(a(46),a(48),a(50),a(52),a(27),a(4)),o=a(5),i=a(9),d=a(6),u=a(8),m=a(93),p=a(92),h=a(2),b=a(7),f=a(13),v=a.n(f),E="orders:retrievedOrdersByUser";var O=a(33),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={currentPage:1,rowsPerPage:5,isFilter:!1,clickedFilter:"all"},a.handleRowClick=a.handleRowClick.bind(Object(h.a)(Object(h.a)(a))),a.handleFilterOrders=a.handleFilterOrders.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.onRetrieveOrders)().catch(function(t){e.props.history.push("/login")})}},{key:"handleFilterOrders",value:function(e){this.setState({isFilter:!0,clickedFilter:e.target.value})}},{key:"handleRowClick",value:function(e){this.setState({showTable:!0}),this.props.history.push("/order/"+e)}},{key:"render",value:function(){var e=this,t=this.props.orders;return this.state.isFilter&&(t="all"===this.state.clickedFilter?this.props.orders:this.props.orders.filter(function(t){return t.status===e.state.clickedFilter})),n.a.createElement("div",null,n.a.createElement("div",{className:"orderlist-wrapper"},n.a.createElement("select",{className:"order-filter",onChange:function(t){return e.handleFilterOrders(t)}},n.a.createElement("option",{value:""},"Filter order by status"),n.a.createElement("option",{value:"all"},"All"),n.a.createElement("option",{value:"open"},"Open"),n.a.createElement("option",{value:"close"},"Closed")),n.a.createElement("table",{id:"order-table",className:"table table-hover table table-bordered "},n.a.createElement("thead",{className:"black white-text"},n.a.createElement("tr",{className:"table_row"},n.a.createElement("th",{className:"table_cell",scope:"col"}),n.a.createElement("th",{className:"table_cell",scope:"col"},"Order ID"),n.a.createElement("th",{className:"table_cell",scope:"col"},"Creation Date"),n.a.createElement("th",{className:"table_cell",scope:"col"},"Status"),n.a.createElement("th",{className:"table_cell",scope:"col"},"Total Amount"))),n.a.createElement("tbody",null,t.map(function(t,a){return n.a.createElement("tr",{className:"table_row",key:a,onClick:function(){return e.handleRowClick(t.order_id)}},n.a.createElement("th",{className:"table_cell",scope:"col"},n.a.createElement("div",null,n.a.createElement("label",null," ",a+1))),n.a.createElement("td",{className:"table_cell"},t.order_id),n.a.createElement("td",{className:"table_cell"},O(t.created_date,"dddd, mmmm dS, yyyy")),n.a.createElement("td",{className:"table_cell"},t.status),n.a.createElement("td",{className:"table_cell"},t.total_amount))})))))}}]),t}(n.a.Component),g={onRetrieveOrders:function(){return function(e){return v.a.get("/api/order/user").then(function(t){return e({type:E,payload:t.data}),t})}}},N=Object(b.b)(function(e){return{user:e.user,orders:e.orders.data}},g)(y),_=a(17),j="orders:retrievedOrderitems",w="orders:updatedOrderitem",k="orders:deletedOrderitem",C="orders:addedOrderitem";function I(e){return function(t){var a="/api/order/id/"+e;return v.a.get(a).then(function(e){return t({type:j,payload:e.data}),e})}}var S=a(11),M=a(16),P=a.n(M),F="items:retrievedItems";var U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={currentTab:"pizza",itemsInOrder:[]},a.handleAddItem=a.handleAddItem.bind(Object(h.a)(Object(h.a)(a))),a.openTab=a.openTab.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.onRetrieveItems().catch(function(e){console.log("Error : ",e)}),this.setState({itemsInOrder:this.props.orderitems.items.map(function(e){return e.item_id})})}},{key:"handleAddItem",value:function(e,t){this.props.onAddOrderItem(this.props.orderitems.order_id,t,e.target.value)}},{key:"openTab",value:function(e){this.setState({currentTab:e.target.value})}},{key:"render",value:function(){var e=this;console.log("item.category",this.state.currentTab);var t=this.state.itemsInOrder,a=this.props.items.filter(function(t){return t.category.toLowerCase()===e.state.currentTab});return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("button",{type:"button",id:"close-btn",className:"close","aria-label":"Close",onClick:this.props.closeModal}," Close")),n.a.createElement("div",{id:"container"},n.a.createElement("div",{id:"tabs"},["pizza","pasta","appetizer","beverages"].map(function(t,a){return n.a.createElement("button",{id:"tabButton",key:a,value:t,onClick:function(t){return e.openTab(t)}},t)})),n.a.createElement("div",{id:"content"},n.a.createElement("div",{className:"itemlist-wrapper"},a.map(function(a,r){return n.a.createElement("div",{className:"card-wrapper",key:r},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-container"},n.a.createElement("h5",null,n.a.createElement("b",null,a.item_name)),n.a.createElement("img",{src:"https://source.unsplash.com/collection/3225463/200x100",alt:"food-logo"}))),n.a.createElement("div",{className:"detail-panel"},n.a.createElement("div",{className:"h-row"},n.a.createElement("label",null,a.item_name," ")),n.a.createElement("div",{className:"h-row"},n.a.createElement("label",null,"RS. ",a.price," ")),n.a.createElement("div",{className:"h-row"},t.indexOf(a.item_id)>-1?"Already added":n.a.createElement("div",null,n.a.createElement("p",null,"  ",n.a.createElement("input",{id:"data-input",type:"number",defaultValue:0,onChange:function(t){return e.handleAddItem(t,a.item_id)}}))))))})))))}}]),t}(n.a.Component),D={onRetrieveItems:function(){return function(e){return v.a.get("/api/item").then(function(t){return e({type:F,payload:t.data}),t})}},onAddOrderItem:function(e,t,a){var r={order_id:e,item_id:t,quantity:a};return function(t){return v.a.post("/api/orderitem",r).then(function(a){t(I(e))}).catch(function(e){console.log("Error",e)})}}},x=Object(b.b)(function(e){return{items:e.items.data,orderitems:e.orderitems}},D)(U),A="modal:openModal",T="modal:hideModal";function R(){return function(e){return e({type:T})}}var V={itemCart:x};P.a.defaultStyles.content.width="900px",P.a.defaultStyles.content.height="800px",P.a.defaultStyles.content.margin="auto",P.a.defaultStyles.content.padding="30px",P.a.defaultStyles.content.overflow="hidden";var q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(console.log("Modal props",this.props),!this.props.type||!this.props.open)return null;var e=V[this.props.type];return n.a.createElement("div",null,n.a.createElement(P.a,{isOpen:this.props.open,onRequestClose:this.props.hideModal,contentLabel:"Example Modal",ariaHideApp:!1},n.a.createElement(e,{closeModal:this.props.hideModal,title:this.props.title,items:this.props.items})))}}]),t}(n.a.Component),z={hideModal:R},L=Object(b.b)(function(e){return Object(S.a)({},e.modal)},z)(q),Q=a(33),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={currentPage:1,rowsPerPage:10,updateValue:0},a.updateQuantity=a.updateQuantity.bind(Object(h.a)(Object(h.a)(a))),a.deleteCartItem=a.deleteCartItem.bind(Object(h.a)(Object(h.a)(a))),a.handlePagination=a.handlePagination.bind(Object(h.a)(Object(h.a)(a))),a.handleOpenModal=a.handleOpenModal.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.onRetrievOrderItems(this.props.match.params.id).catch(function(e){console.log("Error : ",e)})}},{key:"updateQuantity",value:function(e,t){var a=this;this.setState(Object(_.a)({},e.target.name,[e.target.value])),this.props.orderitems.items.map(function(r,n){r.orderitem_id===t&&(a.props.orderitems.items[n].quantity=e.target.value,a.props.onUpdateOrderItem(a.props.orderitems.items[n]).catch(function(e){console.log("Error : ",e)}))})}},{key:"deleteCartItem",value:function(e,t){var a=this;this.props.orderitems.items.map(function(e,r){a.props.onDeleteOrderItem(t).then(function(e){a.render()}).catch(function(e){console.log("Error : ",e)})})}},{key:"handlePagination",value:function(e){this.setState({currentPage:Number(e.target.id)})}},{key:"handleOpenModal",value:function(e){this.props.onOpenModal("itemCart","ItemCart Modal",this.props.items)}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.currentPage,r=t.rowsPerPage,l=this.props.orderitems.items,s=a*r,c=s-r,o=l.slice(c,s),i=[],d=1;d<=Math.ceil(l.length/r);d++)i.push(d);var u=i.map(function(t){return n.a.createElement("li",{key:t,id:t,onClick:e.handlePagination},t)});return n.a.createElement("div",null,n.a.createElement(L,null),n.a.createElement("div",null,n.a.createElement("div",{className:"order-wrapper"},n.a.createElement("table",{id:"table-order",className:"table table-default "},n.a.createElement("thead",{className:"black white-text"},n.a.createElement("tr",{className:"table_row"},n.a.createElement("th",{className:"table_cell",scope:"col"},n.a.createElement("label",{className:"th-label"},"Order ID")," "),n.a.createElement("th",{className:"table_cell",scope:"col"},n.a.createElement("label",{className:"th-label"},"Creation Date ")," "),n.a.createElement("th",{className:"table_cell",scope:"col"},n.a.createElement("label",{className:"th-label"},"Status ")),n.a.createElement("th",{className:"table_cell",scope:"col"},n.a.createElement("label",{className:"th-label"},"Total Amount ")))),n.a.createElement("tbody",null,n.a.createElement("tr",{className:"table_row"},n.a.createElement("td",{className:"table_cell"},this.props.orderitems.order_id),n.a.createElement("td",{className:"table_cell"},Q(this.props.orderitems.created_date,"dddd, mmmm dS, yyyy")),n.a.createElement("td",{className:"table_cell"},this.props.orderitems.status),n.a.createElement("td",{className:"table_cell"},this.props.orderitems.total_amount))))),n.a.createElement("div",{className:"orderdetail-wrapper"},n.a.createElement("div",{className:"orderdetail-header"},n.a.createElement("button",{className:"add_cart_btn",onClick:this.handleOpenModal},n.a.createElement("i",{className:"fa fa-cart-plus"})," Add to Order")),n.a.createElement("table",{id:"table-cart",className:"table table-hover table table-bordered"},n.a.createElement("thead",{className:"black white-text"},n.a.createElement("tr",{className:"table_row"},n.a.createElement("th",{className:"table_cell",scope:"col"}),n.a.createElement("th",{className:"table_cell",scope:"col"},"Item Name"),n.a.createElement("th",{className:"table_cell",scope:"col"},"Quantity"),n.a.createElement("th",{className:"table_cell",scope:"col"},"Unit Price"))),n.a.createElement("tbody",null,o.map(function(t,a){return n.a.createElement("tr",{className:"table_row",key:a},n.a.createElement("td",{className:"table_cell"},a+1),n.a.createElement("td",{className:"table_cell"},t.item_name),n.a.createElement("td",{className:"table_cell"},n.a.createElement("input",{className:"input_spinner",name:"input"+t.orderitem_id,placeholder:"Enter a number",value:t.quantity,required:!0,type:"number",min:"0",max:"100",onChange:function(a){return e.updateQuantity(a,t.orderitem_id)}})),n.a.createElement("td",{className:"table_cell"},t.price),n.a.createElement("td",{className:"table_cell"},n.a.createElement("button",{className:"remove_btn",onClick:function(a){return e.deleteCartItem(a,t.orderitem_id)}},n.a.createElement("i",{className:"fa fa-trash"})," ")))}))),n.a.createElement("ul",{id:"page-numbers"},u))),"}")}}]),t}(n.a.Component),J={onRetrievOrderItems:I,hideModal:R,onOpenModal:function(e,t,a){return function(r){return r({type:A,payload:{type:e,title:t,items:a,open:!0}})}},onUpdateOrderItem:function(e){return function(t){return v.a.put("/api/orderitem",e).then(function(e){t({type:w,payload:e.data})})}},onDeleteOrderItem:function(e){return function(t){return v.a.delete("/api/orderitem/"+e).then(function(a){t({type:k,payload:e})})}}},W=Object(b.b)(function(e){return{orderitems:e.orderitems,modal:e.modal,items:e.items}},J)(B),X="users:validateUser";function H(){return function(e){return v.a.get("/api/session").then(function(t){return console.log("this is user :",t.data),e({type:X,payload:t.data}),t})}}var $=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(d.a)(t).call(this,e))).state={user_name:"",password:""},a.updateUsername=a.updateUsername.bind(Object(h.a)(Object(h.a)(a))),a.updatePassword=a.updatePassword.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.afterValidateUser().then(function(){e.props.history.push("/orders")})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.loginUser(this.state.user_name,this.state.password).then(function(e){t.props.history.push("/orders")})}},{key:"updateUsername",value:function(e){e.preventDefault(),this.setState({user_name:e.target.value})}},{key:"updatePassword",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"render",value:function(){return n.a.createElement("div",{className:"outer-wrapper"},n.a.createElement("div",{className:"outer-box"},n.a.createElement("div",{className:"header"},"Sign In"),n.a.createElement("div",{className:"inner-box"},n.a.createElement("form",{id:"loginSubmissionForm"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"User Name  "),n.a.createElement("input",{id:"userinput",name:"username",className:"input-group-text",type:"text",value:this.state.user_name||"",onChange:this.updateUsername})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password  "),n.a.createElement("input",{id:"password",name:"password",className:"input-group-text",type:"password",value:this.state.password||"",onChange:this.updatePassword})),n.a.createElement("input",{id:"submit-button",type:"submit",value:"Sign In",className:"btn btn-info",onClick:this.handleSubmit})),this.props.user)))}}]),t}(n.a.Component),G={loginUser:function(e,t){return function(a){return v.a.post("/user/login",{user_name:e,password:t}).then(function(e){a({type:X,payload:e.data})}).catch(function(e){console.log("Error Log In. Please Try Again.",e)})}},afterValidateUser:H},K=Object(b.b)(null,G)($),Y=a(94),Z=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.onValidateUser().catch(function(t){e.props.history.push("/login")})}},{key:"render",value:function(){return n.a.createElement("div",{className:"navbar"},n.a.createElement("p",null,"POS"),""!==this.props.user.user_name&&n.a.createElement("div",{className:"user-panel"},n.a.createElement("div",{className:"user_icon_div"},n.a.createElement("i",{className:"glyphicon glyphicon-user",id:"user_icon"})),n.a.createElement("div",{className:"user_Label"},this.props.user.user_name)))}}]),t}(n.a.Component),ee={onValidateUser:H},te=Object(Y.a)(Object(b.b)(function(e){return{user:e.user}},ee)(Z)),ae=a(15),re=a(39),ne={user_name:"",user_type:""};var le={isFetched:!0,data:[]};var se={isFetchedItems:!1,isUpdated:!1,isDeleted:!1,isAdded:!1,order_id:"",created_date:"",status:"",items:[]};var ce={isFetchedItems:!1,data:[]};var oe={type:null,open:!1,title:"",message:""};var ie=Object(ae.a)(re.a),de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ae.d,ue=Object(ae.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return t.payload;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case E:return Object(S.a)({},le,{isFetched:!0,data:r});default:return e}},orderitems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case j:return Object(S.a)({},e,{isFetched:!0},r);case w:return Object(S.a)({},e,{isUpdated:!0},r);case k:var n=Object.assign({},e);return n.items=n.items.filter(function(e){return e.orderitem_id!==r}),Object(S.a)({},n,{isDeleted:!0});case C:var l=Object.assign({},e);return l.items.push(r.items),Object(S.a)({},l,{isAdded:!0},r);default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case F:return Object(S.a)({},e,{isFetchedItems:!0,data:r});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(S.a)({},oe,t.payload);case T:return oe;default:return e}}}),me=Object(ae.e)(ue,de(ie)),pe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(b.a,{store:me},n.a.createElement(m.a,null,n.a.createElement("div",null,n.a.createElement(te,null),n.a.createElement("div",{className:"content"},n.a.createElement(p.a,{exact:!0,component:N,path:"/"}),n.a.createElement(p.a,{component:K,path:"/login"}),n.a.createElement(p.a,{component:N,path:"/orders"}),n.a.createElement(p.a,{component:W,path:"/order/:id"}),n.a.createElement(p.a,{component:L,path:"/modal"})))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(87),a(89);s.a.render(n.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.8ce7ae48.chunk.js.map